"use strict";(self.webpackChunkp_my_dm=self.webpackChunkp_my_dm||[]).push([[9059],{9035:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>o,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"aplicaciones m\xf3viles/5 Persistencia/Room/Casos Pr\xe1cticos/5.3.4.1 CRUD","title":"5.3.4.1 CRUD","description":"Caso Pr\xe1ctico: CRUD Completo con Room \ud83d\udee0\ufe0f\ud83d\udcc2","source":"@site/docs/aplicaciones m\xf3viles/5 Persistencia/Room/Casos Pr\xe1cticos/5.3.4.1 CRUD.md","sourceDirName":"aplicaciones m\xf3viles/5 Persistencia/Room/Casos Pr\xe1cticos","slug":"/aplicaciones m\xf3viles/5 Persistencia/Room/Casos Pr\xe1cticos/5.3.4.1 CRUD","permalink":"/docs/aplicaciones m\xf3viles/5 Persistencia/Room/Casos Pr\xe1cticos/5.3.4.1 CRUD","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"movilesSidebar","previous":{"title":"5.3.4 Casos Pr\xe1cticos","permalink":"/docs/category/534-casos-pr\xe1cticos"},"next":{"title":"UT6 - Bibliotecas Multimedia","permalink":"/docs/category/ut6---bibliotecas-multimedia"}}');var i=n(4848),s=n(8453);const o={sidebar_position:1},t=void 0,d={},l=[{value:"<strong>Caso Pr\xe1ctico: CRUD Completo con Room</strong> \ud83d\udee0\ufe0f\ud83d\udcc2",id:"caso-pr\xe1ctico-crud-completo-con-room-\ufe0f",level:2},{value:"<strong>Objetivo de la aplicaci\xf3n</strong> \ud83c\udfaf",id:"objetivo-de-la-aplicaci\xf3n-",level:3},{value:"<strong>Paso 1: Crear el Proyecto en Android Studio</strong> \ud83d\udda5\ufe0f",id:"paso-1-crear-el-proyecto-en-android-studio-\ufe0f",level:3},{value:"<strong>Paso 2: Configurar Room en el proyecto</strong> \u2699\ufe0f",id:"paso-2-configurar-room-en-el-proyecto-\ufe0f",level:3},{value:"<strong>Agregar dependencias en <code>build.gradle</code></strong> \ud83d\udcdd",id:"agregar-dependencias-en-buildgradle-",level:4},{value:"<strong>Paso 3: Crear la Entidad</strong> \ud83d\uddc2\ufe0f",id:"paso-3-crear-la-entidad-\ufe0f",level:3},{value:"<strong>Paso 4: Crear el DAO</strong> \ud83d\udee0\ufe0f",id:"paso-4-crear-el-dao-\ufe0f",level:3},{value:"<strong>Paso 5: Crear la Base de Datos</strong> \ud83c\udfd7\ufe0f",id:"paso-5-crear-la-base-de-datos-\ufe0f",level:3},{value:"<strong>Clase <code>AppDatabase</code></strong>",id:"clase-appdatabase",level:4},{value:"<strong>Paso 6: Inicializar Room</strong> \ud83d\ude80",id:"paso-6-inicializar-room-",level:3},{value:"<strong>Paso 7: Crear el Dise\xf1o de la Interfaz</strong> \ud83d\udd8c\ufe0f",id:"paso-7-crear-el-dise\xf1o-de-la-interfaz-\ufe0f",level:3},{value:"<strong>Dise\xf1o XML (<code>activity_main.xml</code>)</strong>",id:"dise\xf1o-xml-activity_mainxml",level:4},{value:"<strong>Paso 8: Implementar la L\xf3gica en <code>MainActivity</code></strong> \ud83e\udde0",id:"paso-8-implementar-la-l\xf3gica-en-mainactivity-",level:3},{value:"<strong>Paso 9: Ejecutar la Aplicaci\xf3n</strong> \ud83d\udcf1",id:"paso-9-ejecutar-la-aplicaci\xf3n-",level:3},{value:"\ud83c\udf89 \xa1Felicidades! \ud83c\udf89",id:"-felicidades-",level:3}];function c(e){const r={br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.h2,{id:"caso-pr\xe1ctico-crud-completo-con-room-\ufe0f",children:[(0,i.jsx)(r.strong,{children:"Caso Pr\xe1ctico: CRUD Completo con Room"})," \ud83d\udee0\ufe0f\ud83d\udcc2"]}),"\n",(0,i.jsxs)(r.p,{children:["Este caso pr\xe1ctico te guiar\xe1 paso a paso para crear una aplicaci\xf3n b\xe1sica que permita realizar operaciones ",(0,i.jsx)(r.strong,{children:"CRUD"})," (Crear, Leer, Actualizar y Eliminar) utilizando ",(0,i.jsx)(r.strong,{children:"Android Room"}),". La aplicaci\xf3n gestionar\xe1 una lista de usuarios con los siguientes atributos: ",(0,i.jsx)(r.strong,{children:"ID"}),", ",(0,i.jsx)(r.strong,{children:"Nombre"})," y ",(0,i.jsx)(r.strong,{children:"Apellido"}),". \ud83d\udccb"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.h3,{id:"objetivo-de-la-aplicaci\xf3n-",children:[(0,i.jsx)(r.strong,{children:"Objetivo de la aplicaci\xf3n"})," \ud83c\udfaf"]}),"\n",(0,i.jsxs)(r.p,{children:["La aplicaci\xf3n permitir\xe1:",(0,i.jsx)(r.br,{}),"\n","1\ufe0f\u20e3 ",(0,i.jsx)(r.strong,{children:"Crear usuarios"}),": Agregar un nuevo usuario con nombre y apellido.",(0,i.jsx)(r.br,{}),"\n","2\ufe0f\u20e3 ",(0,i.jsx)(r.strong,{children:"Leer usuarios"}),": Mostrar la lista completa de usuarios almacenados.",(0,i.jsx)(r.br,{}),"\n","3\ufe0f\u20e3 ",(0,i.jsx)(r.strong,{children:"Actualizar usuarios"}),": Editar los datos de un usuario existente.",(0,i.jsx)(r.br,{}),"\n","4\ufe0f\u20e3 ",(0,i.jsx)(r.strong,{children:"Eliminar usuarios"}),": Eliminar un usuario seleccionado de la base de datos."]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.h3,{id:"paso-1-crear-el-proyecto-en-android-studio-\ufe0f",children:[(0,i.jsx)(r.strong,{children:"Paso 1: Crear el Proyecto en Android Studio"})," \ud83d\udda5\ufe0f"]}),"\n",(0,i.jsxs)(r.p,{children:["1\ufe0f\u20e3 Abre ",(0,i.jsx)(r.strong,{children:"Android Studio"})," y crea un nuevo proyecto.",(0,i.jsx)(r.br,{}),"\n","2\ufe0f\u20e3 Selecciona una plantilla b\xe1sica como ",(0,i.jsx)(r.strong,{children:"Empty Activity"}),".",(0,i.jsx)(r.br,{}),"\n","3\ufe0f\u20e3 Configura el proyecto con:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Nombre del proyecto"}),": ",(0,i.jsx)(r.code,{children:"RoomCRUDEjemplo"}),"."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Lenguaje"}),": Java."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"API m\xednima"}),": API 21 o superior (Lollipop)."]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.h3,{id:"paso-2-configurar-room-en-el-proyecto-\ufe0f",children:[(0,i.jsx)(r.strong,{children:"Paso 2: Configurar Room en el proyecto"})," \u2699\ufe0f"]}),"\n",(0,i.jsxs)(r.h4,{id:"agregar-dependencias-en-buildgradle-",children:[(0,i.jsxs)(r.strong,{children:["Agregar dependencias en ",(0,i.jsx)(r.code,{children:"build.gradle"})]})," \ud83d\udcdd"]}),"\n",(0,i.jsxs)(r.p,{children:["1\ufe0f\u20e3 Abre el archivo ",(0,i.jsx)(r.code,{children:"build.gradle"})," (m\xf3dulo: app).",(0,i.jsx)(r.br,{}),"\n","2\ufe0f\u20e3 Agrega las siguientes dependencias para Room:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-kotlin",metastring:'title="build.gradle.kts"',children:"dependencies {\r\n    // Dependencia principal de Room\r\n    implementation (libs.room.runtime)\r\n    // Procesador de anotaciones para Room\r\n    annotationProcessor (libs.room.compiler)\r\n}\n"})}),"\n",(0,i.jsxs)(r.p,{children:["3\ufe0f\u20e3 Sincroniza el proyecto con ",(0,i.jsx)(r.code,{children:"Sync Now"}),". \ud83d\udd04"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.h3,{id:"paso-3-crear-la-entidad-\ufe0f",children:[(0,i.jsx)(r.strong,{children:"Paso 3: Crear la Entidad"})," \ud83d\uddc2\ufe0f"]}),"\n",(0,i.jsxs)(r.p,{children:["Crea una clase que represente la tabla ",(0,i.jsx)(r.code,{children:"users"})," en la base de datos."]}),"\n",(0,i.jsxs)(r.p,{children:["1\ufe0f\u20e3 Crea una nueva clase Java llamada ",(0,i.jsx)(r.code,{children:"User"}),".",(0,i.jsx)(r.br,{}),"\n","2\ufe0f\u20e3 Define la clase como una entidad:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",metastring:'title="User.java"',children:'import androidx.room.ColumnInfo;\r\nimport androidx.room.Entity;\r\nimport androidx.room.PrimaryKey;\r\n\r\n@Entity(tableName = "users")\r\npublic class User {\r\n\r\n    @PrimaryKey(autoGenerate = true) // La clave primaria se genera autom\xe1ticamente\r\n    public int id;\r\n\r\n    @ColumnInfo(name = "first_name") // Nombre de la columna: first_name\r\n    public String firstName;\r\n\r\n    @ColumnInfo(name = "last_name") // Nombre de la columna: last_name\r\n    public String lastName;\r\n\r\n    // Constructor\r\n    public User(String firstName, String lastName) {\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n    }\r\n}\n'})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.h3,{id:"paso-4-crear-el-dao-\ufe0f",children:[(0,i.jsx)(r.strong,{children:"Paso 4: Crear el DAO"})," \ud83d\udee0\ufe0f"]}),"\n",(0,i.jsxs)(r.p,{children:["El ",(0,i.jsx)(r.strong,{children:"DAO (Data Access Object)"})," define los m\xe9todos para interactuar con los datos de la tabla ",(0,i.jsx)(r.code,{children:"users"}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["1\ufe0f\u20e3 Crea un nuevo interfaz Java llamado ",(0,i.jsx)(r.code,{children:"UserDao"}),".",(0,i.jsx)(r.br,{}),"\n","2\ufe0f\u20e3 Define los m\xe9todos necesarios:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",metastring:'title="UserDao.java"',children:'import androidx.room.Dao;\r\nimport androidx.room.Delete;\r\nimport androidx.room.Insert;\r\nimport androidx.room.Query;\r\nimport androidx.room.Update;\r\n\r\nimport java.util.List;\r\n\r\n@Dao\r\npublic interface UserDao {\r\n\r\n    @Insert\r\n    void insertUser(User user);\r\n\r\n    @Query("SELECT * FROM users")\r\n    List<User> getAllUsers();\r\n\r\n    @Query("SELECT * FROM users WHERE id = :userId")\r\n    User getUserById(int userId);\r\n\r\n    @Update\r\n    void updateUser(User user);\r\n\r\n    @Delete\r\n    void deleteUser(User user);\r\n}\n'})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.h3,{id:"paso-5-crear-la-base-de-datos-\ufe0f",children:[(0,i.jsx)(r.strong,{children:"Paso 5: Crear la Base de Datos"})," \ud83c\udfd7\ufe0f"]}),"\n",(0,i.jsxs)(r.p,{children:["Define una clase abstracta que extienda ",(0,i.jsx)(r.code,{children:"RoomDatabase"})," y registre las entidades y DAOs."]}),"\n",(0,i.jsx)(r.h4,{id:"clase-appdatabase",children:(0,i.jsxs)(r.strong,{children:["Clase ",(0,i.jsx)(r.code,{children:"AppDatabase"})]})}),"\n",(0,i.jsxs)(r.p,{children:["1\ufe0f\u20e3 Crea una nueva clase abstracta Java llamada ",(0,i.jsx)(r.code,{children:"AppDatabase"}),".",(0,i.jsx)(r.br,{}),"\n","2\ufe0f\u20e3 Configura la base de datos:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",metastring:'titlle="AppDatabase.java"',children:"import androidx.room.Database;\r\nimport androidx.room.RoomDatabase;\r\n\r\n@Database(entities = {User.class}, version = 1)\r\npublic abstract class AppDatabase extends RoomDatabase {\r\n    public abstract UserDao userDao();\r\n}\n"})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.h3,{id:"paso-6-inicializar-room-",children:[(0,i.jsx)(r.strong,{children:"Paso 6: Inicializar Room"})," \ud83d\ude80"]}),"\n",(0,i.jsxs)(r.p,{children:["Configura una instancia \xfanica de la base de datos usando el ",(0,i.jsx)(r.strong,{children:"patr\xf3n Singleton"}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["1\ufe0f\u20e3 Crea una nueva clase Java llamada ",(0,i.jsx)(r.code,{children:"DatabaseInstance"}),".",(0,i.jsx)(r.br,{}),"\n","2\ufe0f\u20e3 Configura el Singleton:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",metastring:'title="DatabaseInstance.java"',children:'import android.content.Context;\r\nimport androidx.room.Room;\r\n\r\npublic class DatabaseInstance {\r\n\r\n    private static AppDatabase instance;\r\n\r\n    public static synchronized AppDatabase getInstance(Context context) {\r\n        if (instance == null) {\r\n            instance = Room.databaseBuilder(\r\n                context.getApplicationContext(),\r\n                AppDatabase.class,\r\n                "user_database"\r\n            ).build();\r\n        }\r\n        return instance;\r\n    }\r\n}\n'})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.h3,{id:"paso-7-crear-el-dise\xf1o-de-la-interfaz-\ufe0f",children:[(0,i.jsx)(r.strong,{children:"Paso 7: Crear el Dise\xf1o de la Interfaz"})," \ud83d\udd8c\ufe0f"]}),"\n",(0,i.jsx)(r.h4,{id:"dise\xf1o-xml-activity_mainxml",children:(0,i.jsxs)(r.strong,{children:["Dise\xf1o XML (",(0,i.jsx)(r.code,{children:"activity_main.xml"}),")"]})}),"\n",(0,i.jsxs)(r.p,{children:["1\ufe0f\u20e3 Abre el archivo ",(0,i.jsx)(r.code,{children:"activity_main.xml"}),".",(0,i.jsx)(r.br,{}),"\n","2\ufe0f\u20e3 Dise\xf1a la interfaz para agregar y listar usuarios:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-xml",children:'<?xml version="1.0" encoding="utf-8"?>\r\n<LinearLayout\r\n    xmlns:android="http://schemas.android.com/apk/res/android"\r\n    android:layout_width="match_parent"\r\n    android:layout_height="match_parent"\r\n    android:orientation="vertical"\r\n    android:padding="16dp">\r\n\r\n    <EditText\r\n        android:id="@+id/etFirstName"\r\n        android:layout_width="match_parent"\r\n        android:layout_height="wrap_content"\r\n        android:hint="Nombre" />\r\n\r\n    <EditText\r\n        android:id="@+id/etLastName"\r\n        android:layout_width="match_parent"\r\n        android:layout_height="wrap_content"\r\n        android:hint="Apellido" />\r\n\r\n    <Button\r\n        android:id="@+id/btnAddUser"\r\n        android:layout_width="match_parent"\r\n        android:layout_height="wrap_content"\r\n        android:text="Agregar Usuario" />\r\n\r\n    <TextView\r\n        android:id="@+id/tvUserList"\r\n        android:layout_width="match_parent"\r\n        android:layout_height="wrap_content"\r\n        android:paddingTop="16dp"\r\n        android:text="Lista de Usuarios:"\r\n        android:textStyle="bold" />\r\n\r\n    <ScrollView\r\n        android:layout_width="match_parent"\r\n        android:layout_height="wrap_content">\r\n\r\n        <LinearLayout\r\n            android:id="@+id/userListContainer"\r\n            android:layout_width="match_parent"\r\n            android:layout_height="wrap_content"\r\n            android:orientation="vertical" />\r\n    </ScrollView>\r\n</LinearLayout>\n'})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.h3,{id:"paso-8-implementar-la-l\xf3gica-en-mainactivity-",children:[(0,i.jsxs)(r.strong,{children:["Paso 8: Implementar la L\xf3gica en ",(0,i.jsx)(r.code,{children:"MainActivity"})]})," \ud83e\udde0"]}),"\n",(0,i.jsxs)(r.p,{children:["1\ufe0f\u20e3 Abre ",(0,i.jsx)(r.code,{children:"MainActivity.java"}),".",(0,i.jsx)(r.br,{}),"\n","2\ufe0f\u20e3 Escribe el siguiente c\xf3digo:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",children:'import android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport java.util.List;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private EditText etFirstName, etLastName;\r\n    private Button btnAddUser;\r\n    private LinearLayout userListContainer;\r\n    private UserDao userDao;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        etFirstName = findViewById(R.id.etFirstName);\r\n        etLastName = findViewById(R.id.etLastName);\r\n        btnAddUser = findViewById(R.id.btnAddUser);\r\n        userListContainer = findViewById(R.id.userListContainer);\r\n\r\n        // Inicializar el DAO\r\n        userDao = DatabaseInstance.getInstance(this).userDao();\r\n\r\n        // Configurar el bot\xf3n para agregar usuarios\r\n        btnAddUser.setOnClickListener(v -> addUser());\r\n\r\n        // Cargar y mostrar usuarios al iniciar\r\n        loadUsers();\r\n    }\r\n\r\n    private void addUser() {\r\n        String firstName = etFirstName.getText().toString().trim();\r\n        String lastName = etLastName.getText().toString().trim();\r\n\r\n        if (firstName.isEmpty() || lastName.isEmpty()) {\r\n            return; // Validaci\xf3n simple\r\n        }\r\n\r\n        Executors.newSingleThreadExecutor().execute(() -> {\r\n            User user = new User(firstName, lastName);\r\n            userDao.insertUser(user);\r\n            runOnUiThread(this::loadUsers); // Recargar lista\r\n        });\r\n    }\r\n\r\n    private void loadUsers() {\r\n        Executors.newSingleThreadExecutor().execute(() -> {\r\n            List<User> users = userDao.getAllUsers();\r\n            runOnUiThread(() -> {\r\n                userListContainer.removeAllViews();\r\n                for (User user : users) {\r\n                    TextView userView = new TextView(this);\r\n                    userView.setText(user.id + ": " + user.firstName + " " + user.lastName);\r\n                    userListContainer.addView(userView);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n\n'})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.h3,{id:"paso-9-ejecutar-la-aplicaci\xf3n-",children:[(0,i.jsx)(r.strong,{children:"Paso 9: Ejecutar la Aplicaci\xf3n"})," \ud83d\udcf1"]}),"\n",(0,i.jsxs)(r.p,{children:["1\ufe0f\u20e3 Conecta un emulador o dispositivo f\xedsico.",(0,i.jsx)(r.br,{}),"\n","2\ufe0f\u20e3 Ejecuta la aplicaci\xf3n desde Android Studio.",(0,i.jsx)(r.br,{}),"\n","3\ufe0f\u20e3 Prueba las siguientes acciones:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Agregar usuarios."}),"\n",(0,i.jsx)(r.li,{children:"Ver la lista de usuarios en tiempo real."}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h3,{id:"-felicidades-",children:"\ud83c\udf89 \xa1Felicidades! \ud83c\udf89"}),"\n",(0,i.jsxs)(r.p,{children:["\xa1Felicidades! Has creado una aplicaci\xf3n CRUD b\xe1sica con ",(0,i.jsx)(r.strong,{children:"Android Room"}),". \ud83d\ude80"]})]})}function u(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>t});var a=n(6540);const i={},s=a.createContext(i);function o(e){const r=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(s.Provider,{value:r},e.children)}}}]);