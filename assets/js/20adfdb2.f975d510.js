"use strict";(self.webpackChunkp_my_dm=self.webpackChunkp_my_dm||[]).push([[3460],{4261:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>l,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"aplicaciones m\xf3viles/5 Persistencia/Room/Componentes Principales/5.3.3.1 Entidad","title":"5.3.3.1 Entidad","description":"Entidad (@Entity) \ud83d\udee0\ufe0f","source":"@site/docs/aplicaciones m\xf3viles/5 Persistencia/Room/Componentes Principales/5.3.3.1 Entidad.md","sourceDirName":"aplicaciones m\xf3viles/5 Persistencia/Room/Componentes Principales","slug":"/aplicaciones m\xf3viles/5 Persistencia/Room/Componentes Principales/5.3.3.1 Entidad","permalink":"/docs/aplicaciones m\xf3viles/5 Persistencia/Room/Componentes Principales/5.3.3.1 Entidad","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"movilesSidebar","previous":{"title":"5.3.3 Componentes Principales","permalink":"/docs/category/533-componentes-principales"},"next":{"title":"5.3.3.2 DAO","permalink":"/docs/aplicaciones m\xf3viles/5 Persistencia/Room/Componentes Principales/5.3.3.2 DAO"}}');var i=s(4848),r=s(8453);const l={sidebar_position:1},o=void 0,c={},d=[{value:"<strong>Entidad (<code>@Entity</code>)</strong> \ud83d\udee0\ufe0f",id:"entidad-entity-\ufe0f",level:2},{value:"<strong>\xbfQu\xe9 es una Entidad?</strong> \u2753",id:"qu\xe9-es-una-entidad-",level:3},{value:"<strong>C\xf3mo crear una Entidad</strong> \ud83c\udfd7\ufe0f",id:"c\xf3mo-crear-una-entidad-\ufe0f",level:3},{value:"<strong>1. Anotar la clase con <code>@Entity</code></strong> \ud83c\udff7\ufe0f",id:"1-anotar-la-clase-con-entity-\ufe0f",level:4},{value:"<strong>2. Definir una clave primaria</strong> \ud83d\udd11",id:"2-definir-una-clave-primaria-",level:4},{value:"<strong>3. Definir columnas con <code>@ColumnInfo</code> (opcional)</strong> \ud83c\udff7\ufe0f",id:"3-definir-columnas-con-columninfo-opcional-\ufe0f",level:4},{value:"<strong>4. Ignorar campos no necesarios</strong> \u274c",id:"4-ignorar-campos-no-necesarios-",level:4},{value:"<strong>Ejemplo completo de una entidad</strong> \ud83d\udd8b\ufe0f",id:"ejemplo-completo-de-una-entidad-\ufe0f",level:3},{value:"<strong>Anotaciones de Entidad</strong> \ud83d\udccc",id:"anotaciones-de-entidad-",level:3},{value:"<strong>1. <code>@Entity</code></strong>",id:"1-entity",level:4},{value:"<strong>2. <code>@PrimaryKey</code></strong>",id:"2-primarykey",level:4},{value:"<strong>3. <code>@ColumnInfo</code></strong>",id:"3-columninfo",level:4},{value:"<strong>4. <code>@Ignore</code></strong>",id:"4-ignore",level:4},{value:"<strong>\xcdndices en las Entidades</strong> \ud83d\udd0d",id:"\xedndices-en-las-entidades-",level:3},{value:"<strong>Claves primarias compuestas</strong> \ud83d\udd17",id:"claves-primarias-compuestas-",level:3},{value:"<strong>Relaciones entre Entidades</strong> \ud83e\udd1d",id:"relaciones-entre-entidades-",level:3},{value:"<strong>Restricciones de las Entidades</strong> \ud83d\udeab",id:"restricciones-de-las-entidades-",level:3}];function t(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h2,{id:"entidad-entity-\ufe0f",children:[(0,i.jsxs)(n.strong,{children:["Entidad (",(0,i.jsx)(n.code,{children:"@Entity"}),")"]})," \ud83d\udee0\ufe0f"]}),"\n",(0,i.jsxs)(n.p,{children:["En Android Room, una ",(0,i.jsx)(n.strong,{children:"Entidad"})," es un componente fundamental que define una tabla en la base de datos. \ud83d\udcca Cada instancia de la clase entidad corresponde a una fila de dicha tabla. Room utiliza anotaciones \ud83d\udcdd para mapear la estructura de la clase a la estructura de la tabla en SQLite."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"qu\xe9-es-una-entidad-",children:[(0,i.jsx)(n.strong,{children:"\xbfQu\xe9 es una Entidad?"})," \u2753"]}),"\n",(0,i.jsxs)(n.p,{children:["Una entidad es una clase de Java o Kotlin anotada con ",(0,i.jsx)(n.code,{children:"@Entity"}),". Esta clase define:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"El nombre de la tabla"})," \ud83c\udff7\ufe0f."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Las columnas de la tabla"})," \ud83d\udccb, que corresponden a los campos de la clase."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Las claves primarias y for\xe1neas"})," \ud83d\udd11, esenciales para mantener la integridad de los datos."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"c\xf3mo-crear-una-entidad-\ufe0f",children:[(0,i.jsx)(n.strong,{children:"C\xf3mo crear una Entidad"})," \ud83c\udfd7\ufe0f"]}),"\n",(0,i.jsxs)(n.h4,{id:"1-anotar-la-clase-con-entity-\ufe0f",children:[(0,i.jsxs)(n.strong,{children:["1. Anotar la clase con ",(0,i.jsx)(n.code,{children:"@Entity"})]})," \ud83c\udff7\ufe0f"]}),"\n",(0,i.jsxs)(n.p,{children:["La anotaci\xf3n ",(0,i.jsx)(n.code,{children:"@Entity"})," marca una clase como una tabla en la base de datos. Si no se especifica el nombre de la tabla, Room usar\xe1 el nombre de la clase por defecto."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Entity(tableName = "users")\r\npublic class User {\r\n    ...\r\n}\n'})}),"\n",(0,i.jsxs)(n.h4,{id:"2-definir-una-clave-primaria-",children:[(0,i.jsx)(n.strong,{children:"2. Definir una clave primaria"})," \ud83d\udd11"]}),"\n",(0,i.jsxs)(n.p,{children:["Cada tabla debe tener una clave primaria \xfanica, que se define con la anotaci\xf3n ",(0,i.jsx)(n.code,{children:"@PrimaryKey"}),". Room no permite tablas sin claves primarias."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@PrimaryKey\r\npublic int id;\n"})}),"\n",(0,i.jsxs)(n.h4,{id:"3-definir-columnas-con-columninfo-opcional-\ufe0f",children:[(0,i.jsxs)(n.strong,{children:["3. Definir columnas con ",(0,i.jsx)(n.code,{children:"@ColumnInfo"})," (opcional)"]})," \ud83c\udff7\ufe0f"]}),"\n",(0,i.jsxs)(n.p,{children:["Puedes personalizar el nombre de las columnas con la anotaci\xf3n ",(0,i.jsx)(n.code,{children:"@ColumnInfo"}),". Si no la usas, Room tomar\xe1 el nombre de los campos de la clase."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@ColumnInfo(name = "first_name")\r\npublic String firstName;\n'})}),"\n",(0,i.jsxs)(n.h4,{id:"4-ignorar-campos-no-necesarios-",children:[(0,i.jsx)(n.strong,{children:"4. Ignorar campos no necesarios"})," \u274c"]}),"\n",(0,i.jsxs)(n.p,{children:["Si un campo de la clase no debe ser incluido en la tabla, usa la anotaci\xf3n ",(0,i.jsx)(n.code,{children:"@Ignore"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@Ignore\r\npublic String tempData; // Este campo no ser\xe1 parte de la tabla.\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"ejemplo-completo-de-una-entidad-\ufe0f",children:[(0,i.jsx)(n.strong,{children:"Ejemplo completo de una entidad"})," \ud83d\udd8b\ufe0f"]}),"\n",(0,i.jsxs)(n.p,{children:["Aqu\xed se define una tabla ",(0,i.jsx)(n.code,{children:"users"})," con columnas para un ID \xfanico, nombre y apellido. Adem\xe1s, se incluye un campo temporal que no forma parte de la tabla."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'import androidx.room.ColumnInfo;\r\nimport androidx.room.Entity;\r\nimport androidx.room.Ignore;\r\nimport androidx.room.PrimaryKey;\r\n\r\n@Entity(tableName = "users")\r\npublic class User {\r\n\r\n    @PrimaryKey(autoGenerate = true) // La clave primaria se genera autom\xe1ticamente.\r\n    public int id;\r\n\r\n    @ColumnInfo(name = "first_name") // El nombre de la columna ser\xe1 "first_name".\r\n    public String firstName;\r\n\r\n    @ColumnInfo(name = "last_name") // El nombre de la columna ser\xe1 "last_name".\r\n    public String lastName;\r\n\r\n    @Ignore // Este campo no ser\xe1 incluido en la tabla.\r\n    public String tempData;\r\n\r\n    // Constructor principal\r\n    public User(String firstName, String lastName) {\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n    }\r\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"anotaciones-de-entidad-",children:[(0,i.jsx)(n.strong,{children:"Anotaciones de Entidad"})," \ud83d\udccc"]}),"\n",(0,i.jsx)(n.h4,{id:"1-entity",children:(0,i.jsxs)(n.strong,{children:["1. ",(0,i.jsx)(n.code,{children:"@Entity"})]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Define una clase como entidad."}),"\n",(0,i.jsxs)(n.li,{children:["Par\xe1metros comunes:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tableName"}),": Nombre personalizado de la tabla."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"indices"}),": Define \xedndices para mejorar las consultas."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"primaryKeys"}),": Define claves primarias compuestas."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"2-primarykey",children:(0,i.jsxs)(n.strong,{children:["2. ",(0,i.jsx)(n.code,{children:"@PrimaryKey"})]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Declara un campo como clave primaria."}),"\n",(0,i.jsxs)(n.li,{children:["Par\xe1metros comunes:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"autoGenerate"}),": Si es ",(0,i.jsx)(n.code,{children:"true"}),", Room genera autom\xe1ticamente valores \xfanicos."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"3-columninfo",children:(0,i.jsxs)(n.strong,{children:["3. ",(0,i.jsx)(n.code,{children:"@ColumnInfo"})]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Define el nombre de la columna y sus propiedades."}),"\n",(0,i.jsxs)(n.li,{children:["Par\xe1metros comunes:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name"}),": Nombre personalizado de la columna."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"typeAffinity"}),": Especifica el tipo de dato SQLite (por ejemplo, ",(0,i.jsx)(n.code,{children:"TEXT"}),", ",(0,i.jsx)(n.code,{children:"INTEGER"}),")."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"4-ignore",children:(0,i.jsxs)(n.strong,{children:["4. ",(0,i.jsx)(n.code,{children:"@Ignore"})]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Excluye un campo de la tabla."}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"\xedndices-en-las-entidades-",children:[(0,i.jsx)(n.strong,{children:"\xcdndices en las Entidades"})," \ud83d\udd0d"]}),"\n",(0,i.jsxs)(n.p,{children:["Los \xedndices se utilizan para optimizar consultas. Puedes definirlos usando el par\xe1metro ",(0,i.jsx)(n.code,{children:"indices"})," en ",(0,i.jsx)(n.code,{children:"@Entity"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Entity(\r\n    tableName = "users",\r\n    indices = {@Index(value = "first_name", unique = true)}\r\n)\r\npublic class User {\r\n    @PrimaryKey(autoGenerate = true)\r\n    public int id;\r\n\r\n    @ColumnInfo(name = "first_name")\r\n    public String firstName;\r\n\r\n    @ColumnInfo(name = "last_name")\r\n    public String lastName;\r\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\ud83d\udccc ",(0,i.jsx)(n.strong,{children:"Nota"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Se crea un \xedndice para la columna ",(0,i.jsx)(n.code,{children:"first_name"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["El \xedndice es \xfanico, lo que significa que no puede haber dos filas con el mismo ",(0,i.jsx)(n.code,{children:"first_name"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"claves-primarias-compuestas-",children:[(0,i.jsx)(n.strong,{children:"Claves primarias compuestas"})," \ud83d\udd17"]}),"\n",(0,i.jsxs)(n.p,{children:["Si necesitas que tu tabla tenga una clave primaria compuesta (varios campos como clave primaria), puedes usar el par\xe1metro ",(0,i.jsx)(n.code,{children:"primaryKeys"})," en ",(0,i.jsx)(n.code,{children:"@Entity"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Entity(\r\n    tableName = "user_preferences",\r\n    primaryKeys = {"userId", "preferenceKey"}\r\n)\r\npublic class UserPreference {\r\n    public int userId;\r\n    public String preferenceKey;\r\n    public String preferenceValue;\r\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"relaciones-entre-entidades-",children:[(0,i.jsx)(n.strong,{children:"Relaciones entre Entidades"})," \ud83e\udd1d"]}),"\n",(0,i.jsxs)(n.p,{children:["En Room, puedes establecer relaciones entre tablas mediante claves for\xe1neas. Esto se hace utilizando el par\xe1metro ",(0,i.jsx)(n.code,{children:"foreignKeys"})," en ",(0,i.jsx)(n.code,{children:"@Entity"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Entity(\r\n    tableName = "orders",\r\n    foreignKeys = @ForeignKey(\r\n        entity = User.class,\r\n        parentColumns = "id",\r\n        childColumns = "userId",\r\n        onDelete = ForeignKey.CASCADE\r\n    )\r\n)\r\npublic class Order {\r\n    @PrimaryKey(autoGenerate = true)\r\n    public int orderId;\r\n\r\n    public int userId; // Clave for\xe1nea que se relaciona con la tabla "users".\r\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"restricciones-de-las-entidades-",children:[(0,i.jsx)(n.strong,{children:"Restricciones de las Entidades"})," \ud83d\udeab"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Campos obligatorios"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Todos los campos no anulables deben tener un valor predeterminado."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tipos compatibles"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Room admite tipos de datos b\xe1sicos (int, String, boolean, etc.) y algunas clases espec\xedficas como ",(0,i.jsx)(n.code,{children:"Date"})," o ",(0,i.jsx)(n.code,{children:"UUID"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Para otros tipos, necesitas un ",(0,i.jsx)(n.strong,{children:"TypeConverter"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Sin herencia"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Las clases de entidad no pueden heredar de otras clases."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsx)(n.mdxAdmonitionTitle,{}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Una ",(0,i.jsx)(n.strong,{children:"Entidad"})," es una clase que define la estructura de una tabla en Room."]}),"\n",(0,i.jsxs)(n.li,{children:["Usa anotaciones como ",(0,i.jsx)(n.code,{children:"@Entity"}),", ",(0,i.jsx)(n.code,{children:"@PrimaryKey"}),", y ",(0,i.jsx)(n.code,{children:"@ColumnInfo"})," para mapear los datos."]}),"\n",(0,i.jsx)(n.li,{children:"Room valida en tiempo de compilaci\xf3n que la entidad est\xe9 correctamente configurada."}),"\n"]})]}),"\n",(0,i.jsx)(n.hr,{})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var a=s(6540);const i={},r=a.createContext(i);function l(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);